<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

		<script>

			function success_results()
			{
				//window.location = "http://web.cs.georgefox.edu/~xchen13/314-Ladder/login/index.php";
				xmlhttp = new XMLHttpRequest();
				xmlhttp.onreadystatechange=function()
				{
					if (xmlhttp.readyState==4 && xmlhttp.status==200)
					{
						alert("Logged-in page should be shown");
					}
					else
					{
						alert("Wrong password or username");
					}
				}
			}

			function get_form_data()
			{
				//get the form data
				var form = document.forms.example;

				var data = {username:form.username.value, 
				password:form.password.value};

				return JSON.stringify(data);
			}

			$(function()
			{
				//var url = "http://localhost/resources/php/json-echo.php";
				var url = "http://web.cs.georgefox.edu/~xchen13/314-Ladder/login/";
				// URL purpose?????

				//make the button into a jquery button
				$("button").button();

				//setup ajax call
				$("button").click(function()
				{
					alert("clicked!");
					$.ajax({
						url: url,
						type: "POST",
						data: get_form_data(),
						contentType: "application/json; charset=utf-8",
						dataType: "json",
						success: success_result(),
						//error: fail_result()
					});
				});
			}
			);

		</script>
	</head>

	<body>
		<form name="example" action="">
			<label> Username <input name="username" type="text" /> </label>
			<label> Password <input name="password" type="password" /> </label> <br /> <br />
			<button onclick="return false;">Log in</button>
		</form>
		<br />
		<br />
		<div id="output">
		</div>
	</body>
</html>
